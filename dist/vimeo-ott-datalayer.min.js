/* Original: 5364 bytes, Minified: 2305 bytes, Saved: 57.00% */
"use strict";!function(){const e=[.1,.25,.5,.75];function t(){return new Promise((e=>{if(void 0!==window.VHX)return void e();const t=document.createElement("script");t.src="https://cdn.vhx.tv/assets/player.js",t.onload=()=>e(),document.head.appendChild(t)}))}function o(e,...t){const o={event:e};for(const e of t)Object.assign(o,e);const r=t.find((e=>"video_duration"in e));!r||function(e){return e.video_current_time>=0&&e.video_duration>0}(r)?window.dataLayer.push(o):console.warn("Attempted to push invalid video data to dataLayer:",r)}function r(e,t=null){const o=Math.round(e.currentTime())||-1,r=Math.round(e.getVideoDuration())||-1;return{video_current_time:o,video_duration:r,video_percent:null!=t?t:r>0?Math.round(o/r*100):-1,video_url:e._src||""}}function n(){if(!window.VHX)return console.error("VHX is not loaded, retrying in 500ms"),void setTimeout(n,500);Array.from(document.querySelectorAll('iframe[src*="embed.vhx.tv"]')).map(((e,t)=>(e.getAttribute("id")||e.setAttribute("id",`player-id-${t}`),e))).map((t=>{if(!window.VHX)throw new Error("VHX is not loaded");const o=new window.VHX.Player(t.getAttribute("id")||"");return o._src=t.getAttribute("src")||"",o._hasStarted=!1,o._hasFinished=!1,o._milestones=function(t,o=e){const r=t.getVideoDuration();return o.reduce(((e,t)=>{const o=String(Math.round(100*t));return e[o]={pct:o,time:r*t,reached:!1},e}),{})}(o,e),o})).forEach((e=>{e.on("play",(()=>{e._hasStarted||(e._hasStarted=!0,o("ott_video_start",r(e)))})),e.on("timeupdate",((t,n)=>{e._milestones&&void 0!==n&&(console.log("[vimeo-ott-datalayer] timeupdate",{current:n,milestones:e._milestones}),Object.values(e._milestones).forEach((t=>{t.reached||n>t.time&&(t.reached=!0,console.log("[vimeo-ott-datalayer] ott_video_progress",{milestone:t,videoProps:r(e,t.pct)}),o("ott_video_progress",r(e,t.pct)))})))})),e.on("ended",(()=>{e._hasFinished||(e._hasFinished=!0,o("ott_video_complete",r(e)))}))}))}window.dataLayer=window.dataLayer||[],console.log("[vimeo-ott-datalayer] script loaded"),"complete"===document.readyState||"interactive"===document.readyState?t().then(n).catch((e=>{console.error("Error initializing Vimeo OTT DataLayer:",e)})):window.addEventListener("DOMContentLoaded",(()=>{t().then(n).catch((e=>{console.error("Error initializing Vimeo OTT DataLayer:",e)}))}))}();