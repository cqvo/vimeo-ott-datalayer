/* Original: 5826 bytes, Minified: 2369 bytes, Saved: 59.00% */
"use strict";!function(){const e=[.1,.25,.5,.75];function t(){return new Promise((e=>{if(void 0!==window.VHX)return void e();const t=document.createElement("script");t.src="https://cdn.vhx.tv/assets/player.js",t.onload=()=>e(),document.head.appendChild(t)}))}function o(e,...t){const o={event:e};for(const e of t)Object.assign(o,e);const n=t.find((e=>"video_duration"in e));!n||function(e){return e.video_current_time>=0&&e.video_duration>0}(n)?window.dataLayer.push(o):console.warn("Attempted to push invalid video data to dataLayer:",n)}function n(e,t=null){const o=Math.round(e.currentTime())||-1,n=Math.round(e.getVideoDuration())||-1;return{video_current_time:o,video_duration:n,video_percent:null!=t?t:n>0?Math.round(o/n*100):-1,video_url:e._src||""}}function r(){if(!window.VHX)return console.error("VHX is not loaded, retrying in 500ms"),void setTimeout(r,500);Array.from(document.querySelectorAll('iframe[src*="embed.vhx.tv"]')).map(((e,t)=>(e.getAttribute("id")||e.setAttribute("id",`player-id-${t}`),e))).map((t=>{if(!window.VHX)throw new Error("VHX is not loaded");const o=new window.VHX.Player(t.getAttribute("id")||"");return o._src=t.getAttribute("src")||"",o._hasStarted=!1,o._hasFinished=!1,function t(){const n=o.getVideoDuration();n&&n>0?o._milestones=function(t,o=e){return o.reduce(((e,o)=>{const n=t.getVideoDuration(),r=String(Math.round(100*o));return e[r]={pct:r,time:n*o,reached:!1},e}),{})}(o,e):setTimeout(t,100)}(),o})).forEach((e=>{e.on("play",(()=>{e._hasStarted||(e._hasStarted=!0,o("ott_video_start",n(e)))})),e.on("timeupdate",((t,r)=>{e._milestones&&void 0!==r&&(console.log("[vimeo-ott-datalayer] timeupdate",{current:r,milestones:e._milestones}),Object.values(e._milestones).forEach((t=>{t.reached||r>t.time&&(t.reached=!0,console.log("[vimeo-ott-datalayer] ott_video_progress",{milestone:t,videoProps:n(e,t.pct)}),o("ott_video_progress",n(e,t.pct)))})))})),e.on("ended",(()=>{e._hasFinished||(e._hasFinished=!0,o("ott_video_complete",n(e)))}))}))}window.dataLayer=window.dataLayer||[],console.log("[vimeo-ott-datalayer] script loaded"),"complete"===document.readyState||"interactive"===document.readyState?t().then(r).catch((e=>{console.error("Error initializing Vimeo OTT DataLayer:",e)})):window.addEventListener("DOMContentLoaded",(()=>{t().then(r).catch((e=>{console.error("Error initializing Vimeo OTT DataLayer:",e)}))}))}();